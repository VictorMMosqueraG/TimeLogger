<div class="min-vh-100 d-flex align-items-center bg-light">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-6">

        <ng-container *ngIf="user$ | async as user; else login">
          <div class="card shadow rounded-4 border-0 mt-5 animate__animated animate__fadeIn">
            <div class="card-body p-5 text-center">
              <h2 class="mb-3 display-6 text-success">ðŸŽ‰ Â¡Bienvenido!</h2>
              <p class="text-muted mb-4 fs-5">
                Has iniciado sesiÃ³n como <strong class="text-dark">{{ user.email || user.displayName }}</strong>
              </p>
              <hr>
              <button class="btn btn-lg btn-outline-danger px-5" (click)="salir()">Cerrar sesiÃ³n</button>
            </div>
          </div>
        </ng-container>

        <ng-template #login>
          <div class="card shadow rounded-4 border-0 mt-5 animate__animated animate__fadeIn">
            <div class="card-body p-5">

              <h2 class="mb-4 text-center display-6 text-primary">Registro de tiempo</h2>
              <p class="text-center text-muted mb-4">Tu mejor lugar para registrar tus horas de trabajo</p>

              <!-- Mensaje de Ã©xito al crear cuenta -->
              <div *ngIf="registered" class="alert alert-success alert-dismissible fade show" role="alert">
                <strong>Â¡Cuenta creada!</strong> Ya puedes iniciar sesiÃ³n con tu correo y contraseÃ±a.
                <button type="button" class="btn-close" aria-label="Close" (click)="registered = false"></button>
              </div>

              <!-- Mensaje de error al intentar ingresar -->
              <div *ngIf="loginError" class="alert alert-danger alert-dismissible fade show" role="alert">
                <strong>Error:</strong> {{ loginError }}
                <button type="button" class="btn-close" aria-label="Close" (click)="loginError = null"></button>
              </div>

              <form (ngSubmit)="ingresar()" #f="ngForm" autocomplete="off">
                <div class="mb-4">
                  <label class="form-label fs-5 fw-semibold" for="email">Correo electrÃ³nico</label>
                  <input id="email" type="email" class="form-control form-control-lg"
                         [(ngModel)]="credentials.email" name="email" required email
                         autofocus placeholder="ejemplo@email.com" />
                </div>

                <div class="mb-4">
                  <label class="form-label fs-5 fw-semibold" for="pass">ContraseÃ±a</label>
                  <input id="pass" type="password" class="form-control form-control-lg"
                         [(ngModel)]="credentials.password" name="password" required minlength="6"
                         placeholder="Debe tener al menos 6 caracteres" />
                </div>

                <div class="d-grid gap-3 mt-4">
                  <button type="submit" class="btn btn-primary btn-lg" [disabled]="f.invalid">
                    <i class="bi bi-box-arrow-in-right me-2"></i>Ingresar
                  </button>
                  <button type="button" class="btn btn-outline-secondary btn-lg"
                          (click)="registrar()" [disabled]="!credentials.email || !credentials.password">
                    <i class="bi bi-person-plus me-2"></i>Crear cuenta
                  </button>
                  <div class="text-center text-muted my-2 fw-semibold">â€” o â€”</div>
                  <button type="button" class="btn btn-danger btn-lg" (click)="ingresarConGoogle()">
                    <i class="bi bi-google me-2"></i>Ingresar con Google
                  </button>
                </div>
              </form>
            </div>
          </div>
        </ng-template>

      </div>
    </div>
  </div>
</div>
